<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MEDLESS Loader Animation - Preview</title>
  <link rel="stylesheet" href="/styles.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }
    
    .preview-container {
      width: 100%;
      max-width: 600px;
      padding: 2rem;
    }
    
    .preview-card {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    }
    
    .preview-header {
      text-align: center;
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid #e5e7eb;
    }
    
    .preview-header h1 {
      margin: 0 0 0.5rem 0;
      font-size: 1.5rem;
      color: #1f2937;
    }
    
    .preview-header p {
      margin: 0;
      font-size: 0.875rem;
      color: #6b7280;
    }
  </style>
</head>
<body>
  <div class="preview-container">
    <div class="preview-card">
      <div class="preview-header">
        <h1>üé® MEDLESS Loader Animation</h1>
        <p>Standalone Preview f√ºr schnelle Iteration</p>
      </div>
      
      <!-- LOADER ANIMATION -->
      <div class="medical-loader">
        <!-- Spektakul√§re Medical AI DNA-Helix Scanner Animation (150px) -->
        <div class="medical-dna-scanner">
          <!-- Hexagon Container (pulsating medical grid) -->
          <div class="medical-hexagon-container">
            <!-- Outer Hexagon -->
            <svg class="hexagon hexagon-outer" viewBox="0 0 120 120" width="150" height="150">
              <polygon points="60,10 100,30 100,70 60,90 20,70 20,30" fill="none" stroke="#15927a" stroke-width="2.5" opacity="0.3"/>
            </svg>
            <!-- Middle Hexagon -->
            <svg class="hexagon hexagon-middle" viewBox="0 0 120 120" width="150" height="150">
              <polygon points="60,20 90,35 90,65 60,80 30,65 30,35" fill="none" stroke="#14b8a6" stroke-width="2.5" opacity="0.5"/>
            </svg>
            <!-- Inner Hexagon (brightest) -->
            <svg class="hexagon hexagon-inner" viewBox="0 0 120 120" width="150" height="150">
              <polygon points="60,30 80,40 80,60 60,70 40,60 40,40" fill="rgba(20, 184, 166, 0.1)" stroke="#14b8a6" stroke-width="3" opacity="0.8"/>
            </svg>
          </div>
          
          <!-- DNA Helix (rotating double-helix with particles) -->
          <div class="medical-helix-container">
            <!-- Left Helix Strand -->
            <div class="helix-strand helix-left"></div>
            <!-- Right Helix Strand -->
            <div class="helix-strand helix-right"></div>
            
            <!-- Floating Medical Particles -->
            <div class="medical-particle particle-1"></div>
            <div class="medical-particle particle-2"></div>
            <div class="medical-particle particle-3"></div>
            <div class="medical-particle particle-4"></div>
          </div>
          
          <!-- Center Glow Pulse -->
          <div class="medical-center-glow"></div>
        </div>
        
        <h2 class="plan-loader-title">Ihr MEDLESS-Orientierungsplan wird erstellt ‚Ä¶</h2>
        <p class="plan-loader-subtitle">
          Bitte haben Sie einen Moment Geduld. Ihr Orientierungsplan wird anhand Ihrer Angaben berechnet und als PDF vorbereitet.
        </p>
        
        <!-- Medical Analysis Pipeline with Progress -->
        <div class="plan-loader-pipeline">
          <!-- Step 1: Medication Analysis -->
          <div class="plan-loader-step step-1">
            <div class="step-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="20" height="20">
                <path d="M9.5 2.5L14.5 7.5L9.5 12.5L4.5 7.5L9.5 2.5Z" fill="currentColor" opacity="0.3"/>
                <path d="M14.5 11.5L19.5 16.5L14.5 21.5L9.5 16.5L14.5 11.5Z" fill="currentColor"/>
                <path d="M9.5 2.5L14.5 7.5M14.5 7.5L9.5 12.5M14.5 7.5L19.5 16.5M9.5 12.5L4.5 7.5M9.5 12.5L14.5 11.5M4.5 7.5L9.5 2.5M14.5 11.5L9.5 16.5M14.5 11.5L19.5 16.5M9.5 16.5L14.5 21.5M19.5 16.5L14.5 21.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </div>
            <div class="step-text">
              <div class="step-title">
                Medikamente werden analysiert ‚Ä¶
                <span class="step-counter">0/18</span>
              </div>
              <div class="step-subtitle">Wirkstoffe, Dosierung und Einnahmezeiten werden gepr√ºft</div>
              <div class="step-progress">
                <div class="step-progress-bar" data-step="1"></div>
              </div>
              <div class="step-percentage">0%</div>
            </div>
          </div>
          
          <!-- Step 2: Metabolism & Interactions -->
          <div class="plan-loader-step step-2">
            <div class="step-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="20" height="20">
                <path d="M12 3C12 3 8 5.5 8 9C8 11.5 9.5 13 12 13C14.5 13 16 11.5 16 9C16 5.5 12 3 12 3Z" fill="currentColor" opacity="0.3"/>
                <path d="M12 13C12 13 8 15.5 8 19C8 21.5 9.5 23 12 23C14.5 23 16 21.5 16 19C16 15.5 12 13 12 13Z" fill="currentColor" opacity="0.3"/>
                <path d="M4 8C4 8 2 10.5 2 13C2 14.5 3 16 4.5 16C6 16 7.5 14.5 7.5 13C7.5 10.5 4 8 4 8Z" fill="currentColor"/>
                <path d="M20 8C20 8 22 10.5 22 13C22 14.5 21 16 19.5 16C18 16 16.5 14.5 16.5 13C16.5 10.5 20 8 20 8Z" fill="currentColor"/>
                <path d="M12 3L12 23M8 9C8 9 4 8 4 8M16 9C16 9 20 8 20 8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </div>
            <div class="step-text">
              <div class="step-title">
                Stoffwechsel & Wechselwirkungen werden berechnet ‚Ä¶
                <span class="step-counter">0/12</span>
              </div>
              <div class="step-subtitle">Leberenzyme und m√∂gliche Interaktionen werden simuliert</div>
              <div class="step-progress">
                <div class="step-progress-bar" data-step="2"></div>
              </div>
              <div class="step-percentage">0%</div>
            </div>
          </div>
          
          <!-- Step 3: Plan Construction -->
          <div class="plan-loader-step step-3">
            <div class="step-icon">
              <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" width="20" height="20">
                <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="1.5" fill="none"/>
                <path d="M3 9H21M9 3V21" stroke="currentColor" stroke-width="1.5"/>
                <path d="M12 12L17 17M12 17L17 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" opacity="0.5"/>
                <circle cx="6" cy="6" r="1.5" fill="currentColor"/>
                <circle cx="6" cy="15" r="1.5" fill="currentColor" opacity="0.7"/>
                <circle cx="15" cy="6" r="1.5" fill="currentColor" opacity="0.7"/>
              </svg>
            </div>
            <div class="step-text">
              <div class="step-title">
                Orientierungsplan wird konstruiert ‚Ä¶
                <span class="step-counter">0/8</span>
              </div>
              <div class="step-subtitle">Ihr pers√∂nlicher MEDLESS-Orientierungsplan wird aufgebaut</div>
              <div class="step-progress">
                <div class="step-progress-bar" data-step="3"></div>
              </div>
              <div class="step-percentage">0%</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <script>
    // Perfekt synchronisierte Animation - alles endet bei 100%
    function animateProgress() {
      const TOTAL_DURATION = 7000; // 7 Sekunden f√ºr komplette Animation
      
      const steps = [
        { counter: 18, startDelay: 0,    animDuration: 3500 },  // Step 1: startet sofort
        { counter: 12, startDelay: 1200, animDuration: 3200 },  // Step 2: startet bei 1.2s
        { counter: 8,  startDelay: 2400, animDuration: 2900 }   // Step 3: startet bei 2.4s
      ];
      
      // Berechne, wann jeder Step fertig sein muss (alle bei 7s)
      steps.forEach((step, index) => {
        const stepNum = index + 1;
        const counterEl = document.querySelector(`.step-${stepNum} .step-counter`);
        const progressBar = document.querySelector(`.step-progress-bar[data-step="${stepNum}"]`);
        const percentageEl = document.querySelector(`.step-${stepNum} .step-percentage`);
        
        setTimeout(() => {
          let current = 0;
          const startTime = Date.now();
          
          const counterInterval = setInterval(() => {
            const elapsed = Date.now() - startTime;
            const progress = Math.min(1, elapsed / step.animDuration);
            
            // Smooth easing
            const eased = progress < 0.5 
              ? 2 * progress * progress 
              : 1 - Math.pow(-2 * progress + 2, 2) / 2;
            
            current = eased * step.counter;
            const rounded = Math.floor(current);
            const percentage = Math.floor((current / step.counter) * 100);
            
            counterEl.textContent = `${rounded}/${step.counter}`;
            percentageEl.textContent = `${percentage}%`;
            progressBar.style.width = `${percentage}%`;
            
            if (progress >= 1) {
              // Finale Werte
              counterEl.textContent = `${step.counter}/${step.counter}`;
              percentageEl.textContent = `100%`;
              progressBar.style.width = `100%`;
              clearInterval(counterInterval);
            }
          }, 30);
        }, step.startDelay);
      });
      
      // Nach TOTAL_DURATION: Success-State
      setTimeout(() => {
        const title = document.querySelector('.plan-loader-title');
        if (title) {
          title.innerHTML = '‚úì Ihr MEDLESS-Orientierungsplan ist fertig!';
          title.style.color = '#1B9C6E';
        }
      }, TOTAL_DURATION);
    }
    
    // Start animation when page loads
    window.addEventListener('load', () => {
      setTimeout(animateProgress, 500);
    });
  </script>
</body>
</html>
